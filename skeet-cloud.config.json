{
  "app": {
    "name": "skeet-app",
    "projectId": "skeet-example",
    "region": "europe-west4",
    "appDomain": "app.skeet.dev",
    "functionsDomain": "functions.skeet.dev"
  },
  "functions": [
    {
      "name": "openai",
      "methods": [
        {
          "name": "hello",
          "url": "",
          "httpsOptions": {
            "region": "europe-west4",
            "cpu": 1,
            "memory": "1Gi",
            "maxInstances": 100,
            "minInstances": 0,
            "concurrency": 10,
            "ingressSettings": "ALLOW_INTERNAL_AND_GCLB",
            "vpcConnectorEgressSettings": "PRIVATE_RANGES_ONLY"
          }
        },
        {
          "name": "openaichatroom",
          "url": "",
          "httpsOptions": {
            "region": "europe-west4",
            "cpu": 1,
            "memory": "1Gi",
            "maxInstances": 100,
            "minInstances": 0,
            "concurrency": 10,
            "ingressSettings": "ALLOW_INTERNAL_AND_GCLB",
            "vpcConnectorEgressSettings": "PRIVATE_RANGES_ONLY"
          }
        }
      ]
    }
  ],
  "cloudArmor": [
    {
      "securityPolicyName": "skeet-armor",
      "rules": [
        {
          "priority": "1000",
          "description": "ban 300sec if exceed 50 access in 60sec",
          "options": {
            "action": "rate-based-ban",
            "src-ip-ranges": "*",
            "rate-limit-threshold-count": "50",
            "rate-limit-threshold-interval-sec": "60",
            "ban-duration-sec": "300",
            "conform-action": "allow",
            "exceed-action": "deny-404",
            "enforce-on-key": "IP"
          }
        }
      ]
    }
  ]
}
